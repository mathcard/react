{"ast":null,"code":"import _objectSpread from \"C:\\\\reactNative\\\\rocketSeat\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\reactNative\\\\rocketSeat\\\\frontend\\\\src\\\\pages\\\\Box\\\\index.js\";\nimport React, { Component } from 'react';\nimport api from '../../services/api'; //import { distanceInWords } from 'date-fns';\n//import pt from 'date-fns/locale/pt';\n\nimport Dropzone from 'react-dropzone';\nimport socket from 'socket.io-client';\nimport { MdInsertDriveFile } from 'react-icons/md';\nimport logo from '../../assets/logo.png';\nimport './styles.css';\nexport default class Box extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      box: {}\n    };\n\n    this.subscribeToNewFiles = () => {\n      const box = this.props.match.params.id; // Buscando o ID\n\n      const io = socket('https://omnistack-backend-math.herokuapp.com');\n      io.emit('connectRoom', box);\n      io.on('file', data => {\n        this.setState({\n          box: _objectSpread({}, this.state.box, {\n            files: [data, ...this.state.box.files]\n          })\n        });\n      });\n    };\n\n    this.handleUpload = files => {\n      files.forEach(file => {\n        const data = new FormData();\n        const box = this.props.match.params.id;\n        data.append('file', file);\n        api.post(`boxes/${box}/files`, data);\n      });\n    };\n  }\n\n  // Dispara componente automatico, assim que renderizado\n  async componentDidMount() {\n    this.subscribeToNewFiles();\n    const box = this.props.match.params.id;\n    const response = await api.get(`boxes/${box}`);\n    this.setState({\n      box: response.data\n    });\n  } // Atualizando automaticamente a lista de arquivos\n\n\n  /*<span>há {\" \"}\r\n                      {distanceInWords(file.createdAt, new Date(), {\r\n                          locale: pt\r\n                      })}</span>  */\n  render() {\n    return React.createElement(\"div\", {\n      id: \"box-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, this.state.box.title)), React.createElement(Dropzone, {\n      onDropAccepted: this.handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, ({\n      getRootProps,\n      getInputProps\n    }) => React.createElement(\"div\", Object.assign({\n      className: \"upload\"\n    }, getRootProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Arraste ou clique aqui\"))), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, this.state.box.files && this.state.box.files.map(file => React.createElement(\"li\", {\n      key: file._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"fileInfo\",\n      href: file.url,\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(MdInsertDriveFile, {\n      size: 24,\n      color: \"#A5Cfff\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, file.title)), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, file.createdAt)))));\n  }\n\n}","map":{"version":3,"sources":["C:/reactNative/rocketSeat/frontend/src/pages/Box/index.js"],"names":["React","Component","api","Dropzone","socket","MdInsertDriveFile","logo","Box","state","box","subscribeToNewFiles","props","match","params","id","io","emit","on","data","setState","files","handleUpload","forEach","file","FormData","append","post","componentDidMount","response","get","render","title","getRootProps","getInputProps","map","_id","url","createdAt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport api from '../../services/api';\r\n//import { distanceInWords } from 'date-fns';\r\n//import pt from 'date-fns/locale/pt';\r\nimport Dropzone from 'react-dropzone';\r\nimport socket from 'socket.io-client';\r\n\r\nimport { MdInsertDriveFile } from 'react-icons/md'\r\nimport logo from '../../assets/logo.png';\r\nimport './styles.css';\r\n\r\n\r\nexport default class Box extends Component {\r\n    state = { box: {} }\r\n    \r\n    // Dispara componente automatico, assim que renderizado\r\n    async componentDidMount(){\r\n        this.subscribeToNewFiles();\r\n        const box = this.props.match.params.id;\r\n        const response = await api.get(`boxes/${box}`);\r\n        this.setState({ box: response.data });\r\n    }\r\n\r\n    // Atualizando automaticamente a lista de arquivos\r\n    subscribeToNewFiles = () =>{\r\n        const box = this.props.match.params.id; // Buscando o ID\r\n        const io = socket('https://omnistack-backend-math.herokuapp.com');\r\n        io.emit('connectRoom', box);\r\n        io.on('file', data =>{\r\n            this.setState({ box: { ...this.state.box, files: [data, ...this.state.box.files] } })\r\n        });\r\n    }\r\n\r\n    handleUpload = files => {\r\n        files.forEach(file => {\r\n            const data = new FormData();\r\n            const box = this.props.match.params.id;\r\n            data.append('file', file);\r\n            api.post(`boxes/${box}/files`, data);\r\n        });\r\n    };\r\n    /*<span>há {\" \"}\r\n                        {distanceInWords(file.createdAt, new Date(), {\r\n                            locale: pt\r\n                        })}</span>  */\r\n    render() {\r\n    return (\r\n        <div id=\"box-container\">\r\n            <header>\r\n                <img src={logo} alt=\"\" />\r\n                <h1>{this.state.box.title}</h1>\r\n            </header>\r\n            <Dropzone onDropAccepted={this.handleUpload}>\r\n                {( {getRootProps, getInputProps}) =>(\r\n                    <div className=\"upload\" {...getRootProps()}>\r\n                        <input {...getInputProps()} />\r\n                        <p>Arraste ou clique aqui</p>\r\n                    </div>\r\n                )}\r\n            </Dropzone>\r\n                <ul>\r\n                    {this.state.box.files && this.state.box.files.map( file => (\r\n                        <li key={file._id}>\r\n                        <a className=\"fileInfo\" href={file.url} target=\"_blank\">\r\n                            <MdInsertDriveFile size={24} color=\"#A5Cfff\"/>\r\n                            <strong>{file.title}</strong>                        \r\n                        </a>\r\n                        <span>\r\n                            {file.createdAt}\r\n                        </span>                         \r\n                        </li>\r\n                    ))}                                        \r\n                </ul>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}